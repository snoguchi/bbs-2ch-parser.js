(function(d){function c(){this._lastLine=""}function e(){this._lastLine="";this._category=null}function f(){this._lastLine=""}function g(){this._lastLine=""}var h=Object.create||function(a){function b(){}b.prototype=a;return new b};c.prototype.write=function(a){a=a.toString().split("\n");var b=[],c;0<a.length&&(a[0]=this._lastLine+a[0],this._lastLine=a.pop());for(var d=0,e=a.length;d<e;d++)(c=this._parse(a[d]))&&b.push(c);return b};c.prototype.end=function(){var a=[],b;0!==this._lastLine.length&&
(b=this._parse(this._lastLine))&&a.push(b);this._lastLine="";return a};c.prototype.parse=function(a){return this.write(a).concat(this.end())};e.prototype=h(c.prototype);e.prototype._parse=function(a){var b;if(b=a.match(/^<A HREF=(http:\/\/[^\/]+\/[^\/]+\/)>(.*)<\/A><br>/))return{url:b[1],title:b[2],category:this._category};if(b=a.match(/^<BR><BR><B>(.*)<\/B><BR>/))this._category=b[1]};f.prototype=h(c.prototype);f.prototype._parse=function(a){if(a=a.match(/^(\d+)\.dat<>(.*)\((\d+)\)$/))return{id:parseInt(a[1]),
title:a[2],count:parseInt(a[3])}};g.prototype=h(c.prototype);g.prototype._parse=function(a){a=a.split("<>");a[2].split(" ID:");var b={name:a[0],mail:a[1],dtid:a[2],body:a[3]};a[4]&&(b.title=a[4]);return b};d.bbs2ch=d.bbs2ch||{};d.bbs2ch.parser={MenuParser:e,SubjectParser:f,DatParser:g};"undefined"!==typeof module&&(module.exports=d.bbs2ch.parser)})(this.self||global);
